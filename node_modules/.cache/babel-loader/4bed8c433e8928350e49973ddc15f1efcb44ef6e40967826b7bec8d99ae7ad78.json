{"ast":null,"code":"import { circleBounce, circleBounceDataFromParticle, clamp, getDistance } from \"../../../Utils\";\nimport { ParticlesInteractorBase } from \"../../../Core\";\nfunction bounce(p1, p2) {\n  circleBounce(circleBounceDataFromParticle(p1), circleBounceDataFromParticle(p2));\n}\nfunction destroy(p1, p2) {\n  if (!p1.unbreakable && !p2.unbreakable) {\n    bounce(p1, p2);\n  }\n  if (p1.getRadius() === undefined && p2.getRadius() !== undefined) {\n    p1.destroy();\n  } else if (p1.getRadius() !== undefined && p2.getRadius() === undefined) {\n    p2.destroy();\n  } else if (p1.getRadius() !== undefined && p2.getRadius() !== undefined) {\n    if (p1.getRadius() >= p2.getRadius()) {\n      p2.destroy();\n    } else {\n      p1.destroy();\n    }\n  }\n}\nexport class Collider extends ParticlesInteractorBase {\n  constructor(container) {\n    super(container);\n  }\n  isEnabled(particle) {\n    return particle.options.collisions.enable;\n  }\n  reset() {}\n  async interact(p1) {\n    const container = this.container;\n    const pos1 = p1.getPosition();\n    const radius1 = p1.getRadius();\n    const query = container.particles.quadTree.queryCircle(pos1, radius1 * 2);\n    for (const p2 of query) {\n      if (p1 === p2 || !p2.options.collisions.enable || p1.options.collisions.mode !== p2.options.collisions.mode || p2.destroyed || p2.spawning) {\n        continue;\n      }\n      const pos2 = p2.getPosition();\n      if (Math.round(pos1.z) !== Math.round(pos2.z)) {\n        continue;\n      }\n      const dist = getDistance(pos1, pos2);\n      const radius2 = p2.getRadius();\n      const distP = radius1 + radius2;\n      if (dist <= distP) {\n        this.resolveCollision(p1, p2);\n      }\n    }\n  }\n  resolveCollision(p1, p2) {\n    switch (p1.options.collisions.mode) {\n      case \"absorb\":\n        {\n          this.absorb(p1, p2);\n          break;\n        }\n      case \"bounce\":\n        {\n          bounce(p1, p2);\n          break;\n        }\n      case \"destroy\":\n        {\n          destroy(p1, p2);\n          break;\n        }\n    }\n  }\n  absorb(p1, p2) {\n    const container = this.container;\n    const fps = container.fpsLimit / 1000;\n    if (p1.getRadius() === undefined && p2.getRadius() !== undefined) {\n      p1.destroy();\n    } else if (p1.getRadius() !== undefined && p2.getRadius() === undefined) {\n      p2.destroy();\n    } else if (p1.getRadius() !== undefined && p2.getRadius() !== undefined) {\n      if (p1.getRadius() >= p2.getRadius()) {\n        const factor = clamp(p1.getRadius() / p2.getRadius(), 0, p2.getRadius()) * fps;\n        p1.size.value += factor;\n        p2.size.value -= factor;\n        if (p2.getRadius() <= container.retina.pixelRatio) {\n          p2.size.value = 0;\n          p2.destroy();\n        }\n      } else {\n        const factor = clamp(p2.getRadius() / p1.getRadius(), 0, p1.getRadius()) * fps;\n        p1.size.value -= factor;\n        p2.size.value += factor;\n        if (p1.getRadius() <= container.retina.pixelRatio) {\n          p1.size.value = 0;\n          p1.destroy();\n        }\n      }\n    }\n  }\n}","map":{"version":3,"names":["circleBounce","circleBounceDataFromParticle","clamp","getDistance","ParticlesInteractorBase","bounce","p1","p2","destroy","unbreakable","getRadius","undefined","Collider","constructor","container","isEnabled","particle","options","collisions","enable","reset","interact","pos1","getPosition","radius1","query","particles","quadTree","queryCircle","mode","destroyed","spawning","pos2","Math","round","z","dist","radius2","distP","resolveCollision","absorb","fps","fpsLimit","factor","size","value","retina","pixelRatio"],"sources":["/Users/nessakodo/coding/kodo/nessakodo.github.io/node_modules/tsparticles/esm/Interactions/Particles/Collisions/Collider.js"],"sourcesContent":["import { circleBounce, circleBounceDataFromParticle, clamp, getDistance } from \"../../../Utils\";\nimport { ParticlesInteractorBase } from \"../../../Core\";\nfunction bounce(p1, p2) {\n    circleBounce(circleBounceDataFromParticle(p1), circleBounceDataFromParticle(p2));\n}\nfunction destroy(p1, p2) {\n    if (!p1.unbreakable && !p2.unbreakable) {\n        bounce(p1, p2);\n    }\n    if (p1.getRadius() === undefined && p2.getRadius() !== undefined) {\n        p1.destroy();\n    }\n    else if (p1.getRadius() !== undefined && p2.getRadius() === undefined) {\n        p2.destroy();\n    }\n    else if (p1.getRadius() !== undefined && p2.getRadius() !== undefined) {\n        if (p1.getRadius() >= p2.getRadius()) {\n            p2.destroy();\n        }\n        else {\n            p1.destroy();\n        }\n    }\n}\nexport class Collider extends ParticlesInteractorBase {\n    constructor(container) {\n        super(container);\n    }\n    isEnabled(particle) {\n        return particle.options.collisions.enable;\n    }\n    reset() {\n    }\n    async interact(p1) {\n        const container = this.container;\n        const pos1 = p1.getPosition();\n        const radius1 = p1.getRadius();\n        const query = container.particles.quadTree.queryCircle(pos1, radius1 * 2);\n        for (const p2 of query) {\n            if (p1 === p2 ||\n                !p2.options.collisions.enable ||\n                p1.options.collisions.mode !== p2.options.collisions.mode ||\n                p2.destroyed ||\n                p2.spawning) {\n                continue;\n            }\n            const pos2 = p2.getPosition();\n            if (Math.round(pos1.z) !== Math.round(pos2.z)) {\n                continue;\n            }\n            const dist = getDistance(pos1, pos2);\n            const radius2 = p2.getRadius();\n            const distP = radius1 + radius2;\n            if (dist <= distP) {\n                this.resolveCollision(p1, p2);\n            }\n        }\n    }\n    resolveCollision(p1, p2) {\n        switch (p1.options.collisions.mode) {\n            case \"absorb\": {\n                this.absorb(p1, p2);\n                break;\n            }\n            case \"bounce\": {\n                bounce(p1, p2);\n                break;\n            }\n            case \"destroy\": {\n                destroy(p1, p2);\n                break;\n            }\n        }\n    }\n    absorb(p1, p2) {\n        const container = this.container;\n        const fps = container.fpsLimit / 1000;\n        if (p1.getRadius() === undefined && p2.getRadius() !== undefined) {\n            p1.destroy();\n        }\n        else if (p1.getRadius() !== undefined && p2.getRadius() === undefined) {\n            p2.destroy();\n        }\n        else if (p1.getRadius() !== undefined && p2.getRadius() !== undefined) {\n            if (p1.getRadius() >= p2.getRadius()) {\n                const factor = clamp(p1.getRadius() / p2.getRadius(), 0, p2.getRadius()) * fps;\n                p1.size.value += factor;\n                p2.size.value -= factor;\n                if (p2.getRadius() <= container.retina.pixelRatio) {\n                    p2.size.value = 0;\n                    p2.destroy();\n                }\n            }\n            else {\n                const factor = clamp(p2.getRadius() / p1.getRadius(), 0, p1.getRadius()) * fps;\n                p1.size.value -= factor;\n                p2.size.value += factor;\n                if (p1.getRadius() <= container.retina.pixelRatio) {\n                    p1.size.value = 0;\n                    p1.destroy();\n                }\n            }\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}